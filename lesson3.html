<!DOCTYPE html>
<html>
<head>
  <title>R语言基础入门</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'R语言基础入门',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                      },

      // Author information
      presenters: [
            {
        name:  '李丁' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="libs/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="libs/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="libs/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="libs/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="libs/ioslides-13.5.1/js/hammer.js"></script>
  <script src="libs/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="libs/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }

  </style>

  <link rel="stylesheet" href="assets/custom.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">2017年10月10日</p>
          </hgroup>
  </slide>

<slide class=''><hgroup><h2>基础入门</h2></hgroup><article >

<p>摘要：讲解Ｒ的基本操作知识，了解Ｒ的特点、资源获取方式，并掌握基本的程序编写</p>

<ul>
<li>R语言是什么</li>
<li>R的学习资料</li>
<li>R和Rstudio的界面和基本操作</li>
<li>R对象概要介绍</li>
<li>R数据对象详解</li>
<li>函数和控制语句</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 语言的介绍</h2></hgroup><article  id="r-" class="section-title">

</article></slide><slide class=''><hgroup><h2>什么是 R</h2></hgroup><article  id="-r">

<ul>
<li>R 语言是一种业界盛行的数据分析编程语言</li>
<li>理念就是快速、准确地把想法转化成软件</li>
<li>R 语言脱胎于 1980 年左右诞生的 S 语言</li>
<li>S语言是贝尔实验室统计研究部编制的一套完整的高级语言系统</li>
<li>在1998年被美国计算机协会(ACM) 授予了“软件系统奖”</li>
<li>1997 年 R 语言正式成为 GNU 项目</li>
<li>2010年获得第一届“统计计算及图形奖”（美国统计协会）</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 语言的特点</h2></hgroup><article  id="r-">

<ul>
<li>开源和免费</li>
<li>功能强大且扩展性强</li>
<li>与其它软件的交互能力强</li>
<li>各类前沿的数据分析建模方法</li>
<li>实现可重复性(Reproducible)分析</li>
<li>适用于多操作系统的轻量化平台</li>
<li>编程简单</li>
<li>更新快速且文档完备</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 的整合能力</h2></hgroup><article  id="r-">

<ul>
<li>数据：可连接数据库，如Oracle、MySQL</li>
<li>运算：可调用C或Fortran函数进行底层运算</li>
<li>应用：可作为运算引擎嵌入到JAVA开发的系统中(Rserve)</li>
<li>网络：R与web整合部署(Rook, shiny)</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 可以做什么？</h2></hgroup><article  id="r-">

<ul>
<li>统计计算与绘图（学术界）</li>
<li>金融分析</li>
<li>生命科学</li>
<li>互联网数据挖掘</li>
<li>社会化网络分析和可视化</li>
<li><a href='http://mirrors.ustc.edu.cn/CRAN/web/views/' title=''>task views</a></li>
</ul>

</article></slide><slide class=''><hgroup><h2>学习 R 的方法</h2></hgroup><article  id="-r-">

<ul>
<li>适时做笔记,以记下一些重点或技巧</li>
<li>学习时亲手键入代码，修改，理解其意义</li>
<li>坚持练习,尝试利用身边的数据进行应用分析</li>
<li>以tidyverse的风格进入</li>
</ul>

</article></slide><slide class=''><hgroup><h2>学习 R 的资源（网络）</h2></hgroup><article  id="-r-">

<ul>
<li><a href='http://www.r-project.org/' title=''>R语言官方站</a></li>
<li><a href='http://www.r-bloggers.com/' title=''>R-blogger</a></li>
<li><a href='http://journal.r-project.org/current.html' title=''>R语言期刊</a></li>
<li><a href='http://www.rseek.org/' title=''>R语言搜索引擎</a></li>
<li><a href='http://www.rdocumentation.org/' title=''>R函数在线帮助</a></li>
<li><a href='http://stackoverflow.com/questions/tagged/r' title=''>关于R的问答网站</a></li>
<li><a href='http://cos.name/' title=''>统计之都</a></li>
<li><a href='http://china-r.org' title=''>中国R语言会议</a></li>
<li><a href='http://www.computerworld.com/s/article/9239625/Beginner_s_guide_to_R_Introduction' title=''>美国计算机世界杂志提供的Ｒ语言初学者入门资料</a></li>
<li><a href='https://bookdown.org/home/' title=''>Rmarkdown撰写的书籍</a></li>
</ul>

</article></slide><slide class=''><hgroup><h2>学习 R 的资源（书籍）</h2></hgroup><article  id="-r-">

<p>初学入门：</p>

<ul>
<li>《R in Action》（R语言实战）</li>
<li>《The Art of R Programming》</li>
</ul>

<p>tidyverse风格入门：</p>

<ul>
<li><a href='http://r4ds.had.co.nz/' title=''>《R for Data Science》</a></li>
<li><a href='http://moderndive.com/' title=''>《 An Introduction to Statistical and Data Sciences via R》</a></li>
</ul>

<p>统计进阶：</p>

<ul>
<li>《A Handbook of Statistical Analyses_Using_R》</li>
<li>《Modern Applied Statistics With S》</li>
</ul>

<p>数据挖掘：</p>

<ul>
<li>《Data Mining with R: Learning with Case Studies》</li>
<li>《An Introduction to Statistical Learning》</li>
</ul>

</article></slide><slide class=''><hgroup><h2>学习 R 的资源（书籍）</h2></hgroup><article  id="-r--1">

<p>数据绘图：</p>

<ul>
<li>《ggplot2 Elegant Graphics for Data Analysis》</li>
</ul>

<p>参考手册：</p>

<ul>
<li><a href='http://www.cookbook-r.com/' title=''>《R Cookbook》</a></li>
<li>《R in a Nutshell》</li>
</ul>

<p>高级编程：</p>

<ul>
<li>《R Programming for Bioinformatics》</li>
<li>《software for data analysis programming with R》</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 的下载和安装</h2></hgroup><article  id="r-">

<ul>
<li><a href='http://www.r-project.org' title=''>R的官方网站</a></li>
<li><a href='http://www.rstudio.com' title=''>RStudio开发环境</a></li>
<li>扩展包的安装和加载

<ul>
<li><code>install.packages(&quot;tidyverse&quot;)</code></li>
<li><code>library(tidyverse)</code></li>
</ul></li>
<li>安装扩展包相当于将某个工具买回来了；加载相当于带在身上了。</li>
</ul>

</article></slide><slide class='segue dark nobackground level1'><hgroup class = 'auto-fadein'><h2>R工作界面介绍</h2></hgroup><article  id="r">

</article></slide><slide class=''><hgroup><h2>R与Rstudio的关系</h2></hgroup><article  id="rrstudio">

<p><img src="assets/R&Rstudio.png" width="1000px" /></p>

</article></slide><slide class=''><hgroup><h2>R的界面</h2></hgroup><article  id="r">

<p><img src="assets/R.png" width="600px" /></p>

<ul>
<li>可以演示在console中进行运算</li>
</ul>

</article></slide><slide class=''><hgroup><h2>RStudio的界面</h2></hgroup><article  id="rstudio">

<p><img src="assets/Rstudio1.png" width="550px" /></p>

<p>-可以演示在Rstudio的console中进行运算</p>

</article></slide><slide class=''><hgroup><h2>RStudio的界面设定</h2></hgroup><article  id="rstudio">

<p><img src="assets/Rpane.png" width="600px" /></p>

</article></slide><slide class=''><hgroup><h2>RStudio的界面介绍</h2></hgroup><article  id="rstudio">

<p><img src="assets/Rstudio2.png" width="700px" /></p>

</article></slide><slide class=''><hgroup><h2>如何得到帮助</h2></hgroup><article >

<ul>
<li><code>help.start()</code> 打开帮助文档首页</li>
<li><code>help(&quot;foo&quot;)</code>或<code>?foo</code> 查看函数foo的帮助（引号可以省略）</li>
<li><code>help.search(&quot;foo&quot;)</code>或<code>??foo</code> 以foo为关键词搜索本地帮助文档</li>
<li><code>example(&quot;foo&quot;)</code> 函数foo的使用示例（引号可以省略）</li>
<li><code>RSiteSearch(&quot;foo&quot;)</code> 以foo为关键词搜索在线文档和邮件列表存档</li>
<li><code>apropos(&quot;foo&quot;, mode=&quot;function&quot;)</code> 列出名称中含有foo的所有可用函</li>
<li><code>data()</code> 列出当前已加载包中所含的所有可用示例数据集</li>
<li><code>vignette()</code> 列出当前已安装包中所有可用的vignette文档</li>
<li><code>vignette(&quot;foo&quot;)</code>为主题foo显示指定的vignette文档</li>
</ul>

</article></slide><slide class=''><hgroup><h2>工作目录和工作空间</h2></hgroup><article >

<p>工作目录</p>

<ul>
<li><code>getwd()</code> 显示当前的工作目录</li>
<li><code>setwd()</code> 修改当前的工作目录</li>
</ul>

<p>工作空间</p>

<ul>
<li><code>ls()</code> 列出当前工作空间中的对象</li>
<li><code>rm(objectlist)</code> 移除（删除）一个或多个对象</li>
<li><code>save.image(&quot;myfile&quot;)</code> 保存工作空间到文件myfile中（默认后缀 .RData）</li>
<li><code>save(object, file=&quot;myfile&quot;)</code> 保存指定对象到一个文件中</li>
<li><code>load(&quot;myfile&quot;)</code>读取一个工作空间到当前会话中</li>
</ul>

</article></slide><slide class=''><hgroup><h2>R 的启动设置</h2></hgroup><article  id="r-">

<p>改变语言环境</p>

<ul>
<li>(win)修改R安装目录下<code>etc\Rconsole</code>文件，<code>language = en</code></li>
<li>(linux)在用户主目录中增加文件<code>.Renviron</code>，<code>LANGUAGE=en</code></li>
<li>(Mac) 在终端中输入 defaults write org.R-project.R force.LANG en_US.UTF-8 即可</li>
</ul>

<p>改变默认工作目录 <code>setwd(&quot;D:/work&quot;)</code></p>

<p>注意Mac电脑路径与Windows电脑路径的差异问题</p>

</article></slide><slide class=''><hgroup><h2>运行R 代码的方式</h2></hgroup><article  id="r-">

<ul>
<li>在R 环境中运行，source()函数</li>
<li>在shell使用Rscript 来运行R代码。 <code>Rscript d:\rspace\example.R</code></li>
<li>在Rstudio中非常方便：选中后点击运行或者ctrl+enter</li>
</ul>

</article></slide><slide class='segue dark nobackground level1'><hgroup class = 'auto-fadein'><h2>R 语言中的对象</h2></hgroup><article  id="r-">

</article></slide><slide class=''><hgroup><h2>对象</h2></hgroup><article >

<p>Everything in S(R) is an object;</p>

<p>Every object is S(R) has a class.</p>

<ul>
<li>向量</li>
<li>函数</li>
<li>变量</li>
<li>矩阵</li>
<li>数组</li>
<li>数据框</li>
<li>列表</li>
</ul>

</article></slide><slide class=''><hgroup><h2>向量</h2></hgroup><article >

<p>向量及其基本操作</p>

<pre class = 'prettyprint lang-r'>1 + 1 * 3
c(0,1,1,2,3,9)
c(&quot;hello world&quot;, &quot;I am a R user&quot;)
c(1,2,3,4) + c(3,4,5,6)
c(1,2,3,4) + c(1,2)
1:6</pre>

<p>向量之间除了四种数字运算外，还可以进行比较，例如：</p>

<pre class = 'prettyprint lang-r'>c(1,2,3,4) &gt; c(1,2,1,2)</pre>

<pre >## [1] FALSE FALSE  TRUE  TRUE</pre>

</article></slide><slide class=''><hgroup><h2>函数</h2></hgroup><article >

<p>在R语言中，所有的操作和运算都是由函数来完成的。和数学中的函数类似，大多数的函数都是由函数名和参数这两项组成的。例如下面计算指数的例子，<code>exp</code>是函数名，括号中的1则是参数。</p>

<pre class = 'prettyprint lang-r'>exp(1)</pre>

<pre >## [1] 2.718282</pre>

<pre class = 'prettyprint lang-r'>exp(c(1,2,3,4))</pre>

<pre >## [1]  2.718282  7.389056 20.085537 54.598150</pre>

</article></slide><slide class=''><hgroup><h2>变量</h2></hgroup><article >

<p>R语言中可以将各种向量赋值为一个变量。赋值操作符就是等号“<code>=</code>”，也可以是&quot;<code>&lt;-</code>&quot;。下面的例子就是先将向量赋值给x，然后求取其对数。</p>

<pre class = 'prettyprint lang-r'>x &lt;- c(1,2,3,4)
log(x)</pre>

<pre >## [1] 0.0000000 0.6931472 1.0986123 1.3862944</pre>

<p>如果我们想从变量x中取出某一个元素的话，可以使用方括号加索引号，下面取出第二个元素：</p>

<pre class = 'prettyprint lang-r'>x[2]
x[2:4]
x[-4]
x[x&gt;2]</pre>

</article></slide><slide class=''><hgroup><h2>数组</h2></hgroup><article >

<p>数组(Array)是多维的向量，建立数组的方法如下：</p>

<pre class = 'prettyprint lang-r'>a &lt;- array(1:12,dim=c(3,4))
print(a)</pre>

<pre >##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12</pre>

<pre class = 'prettyprint lang-r'>a[2,2]
a[2,]</pre>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article >

<p>数据框(Data frame)是一种类似Excel表格的矩阵数据结构，列表示变量，行表示案例。各列数据类型可以不同，但长度必需一致。下面我们来构建一个有三个属性、五个样本的数据框。</p>

<pre class = 'prettyprint lang-r'>city  &lt;- c(&#39;beijing&#39;,&#39;shanghai&#39;,&#39;chengdu&#39;,&#39;shanghai&#39;,&#39;beijing&#39;)
age &lt;- c(23,43,51,32,60)
gender &lt;- c(&#39;F&#39;,&#39;M&#39;,&#39;F&#39;,&#39;F&#39;,&#39;M&#39;)
people &lt;- data.frame(city,age,gender)
print(people)</pre>

<pre >##       city age gender
## 1  beijing  23      F
## 2 shanghai  43      M
## 3  chengdu  51      F
## 4 shanghai  32      F
## 5  beijing  60      M</pre>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article  id="-1">

<p>和数组操作一样，可以用方括号来提取数据框中的元素。另一种方法是用<code>$</code> 符号来提取某一列。例如提取age变量和gender变量。</p>

<pre class = 'prettyprint lang-r'>people$age</pre>

<pre >## [1] 23 43 51 32 60</pre>

<pre class = 'prettyprint lang-r'>people$gender</pre>

<pre >## [1] F M F F M
## Levels: F M</pre>

<pre class = 'prettyprint lang-r'>people$age&gt;30
people$city[people$age&gt;30]</pre>

</article></slide><slide class=''><hgroup><h2>列表</h2></hgroup><article >

<p>列表(List)是最为灵活的数据结构，它的元素可以是不同类型，也可以有不同长度。还是用age、city、gender三个向量来构建列表。</p>

<pre class = 'prettyprint lang-r'>peoplelist &lt;- list(age=age,city=city,gender=gender)
print(peoplelist)</pre>

<pre >## $age
## [1] 23 43 51 32 60
## 
## $city
## [1] &quot;beijing&quot;  &quot;shanghai&quot; &quot;chengdu&quot;  &quot;shanghai&quot; &quot;beijing&quot; 
## 
## $gender
## [1] &quot;F&quot; &quot;M&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot;</pre>

<pre class = 'prettyprint lang-r'>people.list$array &lt;- a
people.list$dataframe &lt;- people</pre>

</article></slide><slide class=''><hgroup><h2>对象和类</h2></hgroup><article >

<p>函数<code>str()</code>可用以查看一个对象的内部结构。</p>

<pre class = 'prettyprint lang-r'>str(people)</pre>

<pre >## &#39;data.frame&#39;:    5 obs. of  3 variables:
##  $ city  : Factor w/ 3 levels &quot;beijing&quot;,&quot;chengdu&quot;,..: 1 3 2 3 1
##  $ age   : num  23 43 51 32 60
##  $ gender: Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 1 2 1 1 2</pre>

</article></slide><slide class=''><hgroup><h2>模型与公式</h2></hgroup><article >

<p>模型是描述数据的函数。很多时候以公式形式展现，用以预测或解释。</p>

<pre >y ~ x1 + x2 + x3 ... + xn</pre>

<p>一个线性回归例子：使用的数据集是R内置数据car。R语言中回归分析的函数是<code>lm</code>，将回归结果存入变量<code>model</code>中。</p>

<pre class = 'prettyprint lang-r'>model &lt;- lm(formula=dist ~ speed, data=cars)</pre>

</article></slide><slide class=''><hgroup><h2></h2></hgroup><article  id="section">

<p><code>summary</code>作为一个泛函数，可呈现回归结果：包括了各系数及其对应的P值，残差标准误和决定系数等。</p>

<pre class = 'prettyprint lang-r'>summary(model)</pre>

<pre >## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -29.069  -9.525  -2.272   9.215  43.201 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -17.5791     6.7584  -2.601   0.0123 *  
## speed         3.9324     0.4155   9.464 1.49e-12 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 15.38 on 48 degrees of freedom
## Multiple R-squared:  0.6511, Adjusted R-squared:  0.6438 
## F-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12</pre>

</article></slide><slide class='segue dark nobackground level1'><hgroup class = 'auto-fadein'><h2>R数据对象详解</h2></hgroup><article  id="r">

</article></slide><slide class=''><hgroup><h2>基本对象：向量</h2></hgroup><article >

<ul>
<li>单个数值（标量）是向量的一种特例</li>
<li>向量的元素必须属于某种模式（mode），可以整型（integer）、数值型（numeric）、字符型（character）、逻辑型（logical）、复数型（complex）</li>
<li>循环补齐（recycle）：在一定情况下自动延长向量</li>
<li>筛选：提取向量子集</li>
<li>向量化：对向量的每一个元素应用函数</li>
<li>使用seq()创建向量</li>
<li>使用rep()重复向量常数</li>
</ul>

<pre class = 'prettyprint lang-r'>vector1 &lt;- seq(2,10,2)
vector1 &lt;- 1:10 + 2
vector2 &lt;- 1:(10 + 2)</pre>

</article></slide><slide class=''><hgroup><h2>向量的计算</h2></hgroup><article >

<p>去掉最大值和最小值后的向量的算术均值</p>

<pre class = 'prettyprint lang-r'>vector &lt;- rnorm(10)
vec_max &lt;- max(vector)
vec_min &lt;- min(vector)
vector_trimmed &lt;- vector[vector&lt;vec_max &amp; vector&gt;vec_min]
vec_mean &lt;- sum(vector_trimmed)/length(vector_trimmed)</pre>

</article></slide><slide class=''><hgroup><h2>复合对象</h2></hgroup><article >

<p>复合对象是建立在向量基础上的数据结构，这些复合对象是为了满足数据分析的需要而建立的。下面来介绍三种数据结构：矩阵、数据框和列表。</p>

<pre class = 'prettyprint lang-r'>vector &lt;- 1:12
my_matrix &lt;- matrix(vector,nrow=3,ncol=4,byrow=F) 
dim(my_matrix)
dim(vector) &lt;- c(4,3)
print(vector)</pre>

</article></slide><slide class=''><hgroup><h2>矩阵</h2></hgroup><article >

<pre class = 'prettyprint lang-r'>vector1 &lt;- vector2 &lt;- vector3 &lt;- rnorm(3)
my_matrix &lt;- cbind(vector1,vector2,vector3)
ifelse(my_matrix&gt;0,1,0)</pre>

<pre >##      vector1 vector2 vector3
## [1,]       0       0       0
## [2,]       0       0       0
## [3,]       1       1       1</pre>

</article></slide><slide class=''><hgroup><h2>求解线性方程组</h2></hgroup><article >

<pre class = 'prettyprint lang-r'>A &lt;- matrix(c(3,1,5,2),2,2)
b &lt;- matrix(c(4,1),ncol=1)
x &lt;- solve(A,b)</pre>

</article></slide><slide class=''><hgroup><h2>算术运算小结</h2></hgroup><article >

<ul>
<li><code>x + y</code> 加法</li>
<li><code>x - y</code> 减法</li>
<li><code>x * y</code> 乘法</li>
<li><code>x / y</code> 除法</li>
<li><code>x ^ y</code> 乘幂</li>
<li><code>x %% y</code> 模运算</li>
<li><code>x %/% y</code> 整数除法</li>
</ul>

</article></slide><slide class=''><hgroup><h2>逻辑运算小结</h2></hgroup><article >

<ul>
<li><code>x == y</code> 判断是否相等</li>
<li><code>x &lt;= y</code> 判断是否小于等于</li>
<li><code>x &gt;= y</code> 判断是否大于等于</li>
<li><code>x &amp; y</code> 向量的逻辑“与”运算（x、y以及运算结果都是向量）</li>
<li><code>x | y</code> 向量的逻辑“或”运算（x、y以及运算结果都是向量）</li>
<li><code>!x</code> 逻辑非</li>
<li>逻辑值<code>TRUE</code>和<code>FALSE</code>可以缩写为<code>T</code>和<code>F</code>（两者都必须是大写）。而在算术表达式它们会转换为1和0</li>
</ul>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article  id="-2">

<p>构建一个有两个属性、五个样本的数据框。</p>

<pre class = 'prettyprint lang-r'>city &lt;- c(&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;)
temp = c(27,29,23,14)
data &lt;- data.frame(city,temp)</pre>

<p>提取数据框中的元素</p>

<pre class = 'prettyprint lang-r'>data[ ,1]
data[, &#39;city&#39;]
data$city</pre>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article  id="-3">

<p>字符转换为因子型变量，可按如下方式手工进行参数设定。</p>

<pre class = 'prettyprint lang-r'>data &lt;- data.frame(city,temp,stringsAsFactors=F)</pre>

<p>数据框将不同向量组合一起更方便操作，尝试找出高于平均温度的城市。</p>

<pre class = 'prettyprint lang-r'>ave &lt;- mean(data$temp)
data[data$temp&gt;ave, ]</pre>

<pre >##   city temp
## 1    A   27
## 2    B   29</pre>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article  id="-4">

<p>下面几个函数可用来了解一个数据框的基本属性。</p>

<pre class = 'prettyprint lang-r'>data &lt;- data.frame(city,temp)
summary(data)
dim(data)
head(data)
str(data)</pre>

<p>summary函数负责对每列进行统计，dim得到维度，head得到前六行数据，而str则返回整个数据的结构。</p>

</article></slide><slide class=''><hgroup><h2>数据框</h2></hgroup><article  id="-5">

<p>数据框排序排序，order函数</p>

<pre class = 'prettyprint lang-r'>order(data$temp)
data[order(data$temp),]
data[order(data$temp,decreasing=T),][1:2, ]</pre>

</article></slide><slide class=''><hgroup><h2>列表</h2></hgroup><article  id="-1">

<p>列表(List)是最为灵活的数据结构，可以由不同类型的对象组合而成，也可以是不同的长度</p>

<pre class = 'prettyprint lang-r'>data_list = list(temp=temp,city=city)
print(data_list)</pre>

<pre >## $temp
## [1] 27 29 23 14
## 
## $city
## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;</pre>

<pre class = 'prettyprint lang-r'>data_list$mat &lt;- my_mat
data_list$data &lt;- data</pre>

</article></slide><slide class=''><hgroup><h2>列表</h2></hgroup><article  id="-2">

<p>列表也能使用数字为索引来提取元素，但需要用两个方括号。例如提取最后一个data元素。</p>

<pre class = 'prettyprint lang-r'>names(data_list)
data_list$data
length(data_list)
data_list[[4]]</pre>

</article></slide><slide class=''><hgroup><h2>缺失值与空值</h2></hgroup><article >

<p>真实的数据分析工作中会经常遇到数据缺失情况，缺失的数据在Ｒ中一般表示为NA。当一个数据中包含了NA时，很多函数的行为会不一样，甚至会产生错误。</p>

<pre class = 'prettyprint lang-r'>temp &lt;- c(27, 29, 23, 14,NA)
mean(temp)
mean(temp,na.rm=T)
is.na(temp)</pre>

</article></slide><slide class=''><hgroup><h2>缺失值与空值</h2></hgroup><article  id="-1">

<p>缺失值的意义是应该有数据而没有，起到一个占位符的作用。空值的意义则是完成没有，空值的表示是NULL。下面的例子中temp仍然只有四个元素。</p>

<pre class = 'prettyprint lang-r'>temp &lt;- c(27, 29, 23, 14,NULL)</pre>

<p>NULL有时候可以用来方便的删除复杂对象中的一个元素，例如删除前面data_list中的data元素。</p>

<pre class = 'prettyprint lang-r'>data_list$data &lt;- NULL</pre>

</article></slide><slide class='segue dark nobackground level1'><hgroup class = 'auto-fadein'><h2>函数和控制语句</h2></hgroup><article >

</article></slide><slide class=''><hgroup><h2>函数的构成</h2></hgroup><article >

<p>和数学中的函数概念类似，函数由三部分构成，即输入、运算、输出。</p>

<pre class = 'prettyprint lang-r'>exp(c(1,2,3,4))</pre>

<pre >## [1]  2.718282  7.389056 20.085537 54.598150</pre>

</article></slide><slide class=''><hgroup><h2>自定义函数</h2></hgroup><article >

<p>一个求圆面积的函数</p>

<pre class = 'prettyprint lang-r'>myfunc &lt;- function(r) {
  area &lt;- pi*r^2
  return(area)
  }
print(myfunc(4))</pre>

<pre >## [1] 50.26548</pre>

<p>函数在调用时会新建一个特殊的子环境，用以处理函数中涉及到的变量，例如上面函数中的area变量，这种变量称为局部变量，因为不会在全局环境中出现而影响其它函数，使用起来非常安全。但函数内部可以调用全局变量，例如上面的pi。</p>

</article></slide><slide class=''><hgroup><h2>条件判断</h2></hgroup><article >

<p>通常R代码的执行是按行顺序执行的，但有时需要根据条件来执行某些分支代码</p>

<pre class = 'prettyprint lang-r'>num &lt;- 5
if (num %% 2 != 0) {
  cat(num,&#39;is odd&#39;)
}</pre>

<pre >## 5 is odd</pre>

</article></slide><slide class=''><hgroup><h2>条件判断</h2></hgroup><article  id="-1">

<p>if只是单一判断是否执行某条代码，若需要多分支判断，可增加else语句，例如增加奇数和偶数的屏幕输出。</p>

<pre class = 'prettyprint lang-r'>num &lt;- 4
if (num %% 2 != 0) {
  cat(num, &#39;is odd&#39;)
} else {
  cat(num, &#39;is even&#39;)
}</pre>

<pre >## 4 is even</pre>

</article></slide><slide class=''><hgroup><h2>条件判断</h2></hgroup><article  id="-2">

<p>对于超过两个分支的条件判断，我们可以使用多重嵌套的if-else语句。例如计算某个数字和3相除的余数。</p>

<pre class = 'prettyprint lang-r'>num &lt;- 10
if (num %% 3 == 1)  {
  cat(&#39;mode is&#39;,1)
} else if (num %% 3 == 2) {
  cat(&#39;mode is&#39;,2)
} else {
  cat(&#39;mode is&#39;,0)
}</pre>

<pre >## mode is 1</pre>

</article></slide><slide class=''><hgroup><h2>二元判断函数</h2></hgroup><article >

<p>ifelse可用于向量化计算，例如判断多个数字是奇数还是偶数。</p>

<pre class = 'prettyprint lang-r'>num &lt;- 1:6
ifelse(num%%2==0, yes=&#39;even&#39;,no=&#39;odd&#39;)</pre>

<pre >## [1] &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot; &quot;odd&quot;  &quot;even&quot;</pre>

<p>ifelse的嵌套</p>

<pre class = 'prettyprint lang-r'>num &lt;- sample(20:70,20,replace=T)
res &lt;- ifelse(num&gt;50,&#39;老年&#39;,ifelse(num&lt;30,&#39;青年&#39;, &#39;中年&#39;))</pre>

</article></slide><slide class=''><hgroup><h2>循环</h2></hgroup><article >

<p>循环语句可以重复运行某一段代码。根据终止的条件，可以将循环分为for循环和while循环。</p>

<p>for循环的终止条件是循环的次数，例如我们计算1到100所有奇数的和。</p>

<pre class = 'prettyprint lang-r'>x &lt;- 0
for (i in 1:100) {
  if (i %% 2 != 0) {
    x &lt;- x + i
  }
}</pre>

<p>实际应用中，计算奇数之和只需要一条代码即可。</p>

<pre class = 'prettyprint lang-r'>sum(seq(1,100,by=2))</pre>

</article></slide><slide class=''><hgroup><h2>循环</h2></hgroup><article  id="-1">

<p>while循环的终止条件是达到某一个标准，还是计算上面同样的例子。</p>

<pre class = 'prettyprint lang-r'>x &lt;- 0
i &lt;- 1
while (i &lt; 100) {
  if (i %% 2 != 0) {
    x &lt;- x + i
  }
  i &lt;- i + 1
}</pre>

</article></slide><slide class=''><hgroup><h2>循环</h2></hgroup><article  id="-2">

<p>除了for、while循环之外，R语言中还可以使用repeat来进行无限次的循环操作。仍是计算100以内的奇数之和。</p>

<pre class = 'prettyprint lang-r'>x &lt;- 0
i &lt;- 1
repeat  {
  if (i %% 2 != 0) {
    x &lt;- x + i
  }
  i &lt;- i + 1
  if (i &gt; 100) break
}</pre>

</article></slide><slide class=''><hgroup><h2>循环</h2></hgroup><article  id="-3">

<p>循环中另外一个常见的命令是next，也就是跳过循环中next后面的代码，而重新开始一次循环。</p>

<pre class = 'prettyprint lang-r'>x &lt;- 0
i &lt;- 0
repeat  {
  i &lt;- i + 1
  if (i &gt; 100) break
  if (i %% 2 == 0) next
  x &lt;- x + i
}</pre>

</article></slide><slide class=''><hgroup><h2>函数</h2></hgroup><article  id="-1">

<p>编写自定义函数是非常容易的，下例是将前面的计算fibonaci数字的代码段转为一个函数。</p>

<pre class = 'prettyprint lang-r'>fibonaci &lt;- function(n) {
  i &lt;- 2
  x &lt;- 1:2
  while (x[i] &lt; n) {
    x[i+1] &lt;- x[i-1] + x[i]
    i &lt;- i + 1
  }
  x &lt;- x[-i]
  return(x)
}
SeqFi &lt;- fibonaci(100)</pre>

</article></slide><slide class=''><hgroup><h2></h2></hgroup><article  id="section-1" class="flexbox vcenter nobackground">

<img src='assets/tobecontinued.png' title='fig:'/><p class='caption'>To be continued</p></article></slide>

  <script src="http://static.xueqing.tv/js/jquery-min.js"></script>
  <script type="text/javascript">
   jQuery(function() {
     jQuery('article.section-title').parent('slide').addClass('segue dark nobackground');
     jQuery('article.nobackground').parent('slide').addClass('nobackground');
   });
    
  </script>

  <slide class="backdrop"></slide>

</slides>


<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
